---
title: Enum
description: Enum 字段类型的使用方法和配置选项
---

## Usage

::note{to="https://zod.dev/api#enums"}
使用 `afz.enum()` 创建枚举字段：
::

### Select

::callout{color="neutral" to="https://ui.nuxt.com/docs/components/select"}
Select 组件文档
::

原生选择框，适合简单的枚举值：

::component-example
---
name: 'auto-form-field-enum-select-example'
collapse: true
props:
  class: 'px-4'
---
::

### SelectMenu

::callout{color="neutral" to="https://ui.nuxt.com/docs/components/select-menu"}
SelectMenu 组件文档
::

下拉菜单，设置 `type: 'selectMenu'`，支持搜索、图标、分组：

::component-example
---
name: 'auto-form-field-enum-select-menu-example'
collapse: true
props:
  class: 'px-4'
---
::

### RadioGroup

::callout{color="neutral" to="https://ui.nuxt.com/docs/components/radio-group"}
RadioGroup 组件文档
::

单选按钮组，设置 `type: 'radioGroup'`，适合 2-4 个选项：

::component-example
---
name: 'auto-form-field-enum-radio-group-example'
collapse: true
props:
  class: 'px-4'
---
::

## API 参数

```ts
afz.enum(values, meta?)
```

### Values

::note
决定字段的**输出类型**，支持三种形式：
::

#### 1. 空数组 `[]`

返回 `ZodString`，用于运行时动态选项：

```ts
const schema = afz.object({
  category: afz.enum([], {
    type: 'selectMenu',
    controlProps: {
      items: categories.value  // 运行时动态数据
    }
  })
})
// 输出类型: string
```

#### 2. 字符串数组

返回 `ZodEnum`，提供类型安全的字面量联合类型：

```ts
const Fruits = ['apple', 'banana', 'orange'] as const
const schema = afz.object({
  fruit: afz.enum(Fruits)
})
// 输出类型: 'apple' | 'banana' | 'orange'
```

#### 3. 枚举对象

返回 `ZodEnum`，支持 TypeScript 原生枚举：

```ts
enum Status {
  Active = 'active',
  Inactive = 'inactive'
}
const schema = afz.object({
  status: afz.enum(Status)
})
// 输出类型: Status
```

### Meta

::note
用于**覆盖默认控件**和配置元数据，支持三种配置方式：
::

:::div{class="rounded-md border border-accented px-4"}

  ::tabs
    :::tabs-item{label="基础配置"}
    不指定控件类型，使用默认的 `select` 控件：
    ```ts
    afz.enum(['a', 'b'], {
      label: '选择选项',
      hint: '请选择一个'
    })
    ```
    :::

    :::tabs-item{label="使用注册控件"}
    通过 `type` 覆盖默认控件，同时保持输出类型不变：
    ```ts
    afz.enum(['a', 'b', 'c'], {
      type: 'radioGroup',  // 覆盖默认的 select
      controlProps: {
        items: [
          { label: '选项A', value: 'a' },
          { label: '选项B', value: 'b' }
        ]
      }
    })
    // 输出类型仍为: 'a' | 'b' | 'c'
    // 但使用 radioGroup 渲染
    ```
    :::

    :::tabs-item{label="自定义组件"}
    直接传入自定义组件实例：
    ```ts
    import MyEnumControl from './MyEnumControl.vue'

    afz.enum(['a', 'b'], {
      component: MyEnumControl,
      controlProps: { /* ... */ }
    })
    ```
    :::
  ::

:::

## 枚举值配置优先级

::tip
`controlProps.items` 以最高优先级决定渲染内容，`enum()` 的第一个参数决定输出类型，两者可以兼用。
::

### 配置方式

**方式 1：自动提取枚举值**

系统会自动将枚举值转换为 `items`：

```ts
const Fruits = ['apple', 'banana', 'orange'] as const

const schema = afz.object({
  fruit: afz.enum(Fruits, {
    type: 'selectMenu',
    controlProps: {
      placeholder: '选择水果'
      // 系统自动转换: items: ['apple', 'banana', 'orange']
    }
  })
})
```

**方式 2：手动提供 items**

使用空数组 `[]` 作为第一个参数，完全由 `items` 决定类型和渲染：

```ts
const schema = afz.object({
  fruit: afz.enum([], {
    type: 'selectMenu',
    controlProps: {
      valueKey: 'value',
      items: [
        { label: '苹果', value: 'apple' },
        { label: '香蕉', value: 'banana' }
      ]
    }
  })
})
```

**方式 3：类型 + 自定义显示（推荐）**

同时使用枚举参数和 `items`，既保证类型安全，又自定义显示：

```ts
const schema = afz.object({
  gender: afz.enum(['male', 'female', 'other'], {
    type: 'radioGroup',
    controlProps: {
      items: [
        { label: '男', value: 'male' },
        { label: '女', value: 'female' },
        { label: '其他', value: 'other' }
      ]
    }
  })
})
// 输出类型: 'male' | 'female' | 'other'
// 显示内容: 男 / 女 / 其他
```

::note
**优先级规则**：
- `controlProps.items` 存在时，以其为准进行渲染
- `enum([...])` 参数决定 TypeScript 输出类型
- 两者可以组合使用，实现类型安全 + 自定义显示
::
