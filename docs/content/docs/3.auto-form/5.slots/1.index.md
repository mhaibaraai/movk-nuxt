---
title: 插槽概览
description: AutoForm 提供强大的插槽系统，允许你自定义表单的各个部分，从整体布局到单个字段的细节。
category: slots
---

## 概述

`AutoForm` 的插槽系统分为三个层级：

- **表单插槽** - 自定义表单整体结构（header、footer、submit）
- **字段插槽** - 微调每个字段的各个部分（label、hint、error 等）
- **内容插槽** - 完全接管对象和数组字段的渲染（仅限对象/数组）

::tip
插槽支持**通用模式**和**特定字段模式**，让你既能统一样式，又能精确控制特定字段。
::

## `setValue` 函数详解

`setValue` 是插槽中最重要的函数，用于更新字段值。它支持多种调用方式，能智能处理不同的数据结构。

### 基本用法

```ts
// 直接设置当前字段的值
setValue(newValue)
```

### 对象字段

对于对象类型的字段，`setValue` 支持相对路径：

```vue
<template #field-content:profile="{ value, setValue }">
  <!-- 方式 1: 设置整个对象 -->
  <UButton @click="setValue({ name: '张三', email: 'test@example.com' })">
    填充默认值
  </UButton>

  <!-- 方式 2: 使用相对路径设置子字段 -->
  <UInput
    :model-value="value?.name"
    @update:model-value="setValue('name', $event)"
  />

  <UInput
    :model-value="value?.email"
    @update:model-value="setValue('email', $event)"
  />
</template>
```

::tip
使用相对路径时，TypeScript 会自动推断可用的键名，提供完整的类型提示。
::

### 数组字段

对于数组类型的字段，`setValue` 支持索引路径：

```vue
<template #field-content:tasks="{ value, setValue }">
  <div v-for="(task, index) in value" :key="index">
    <!-- 设置数组元素的属性 -->
    <UInput
      :model-value="task?.title"
      @update:model-value="setValue(`[${index}].title`, $event)"
    />

    <!-- 删除数组元素 -->
    <UButton
      @click="setValue(value.filter((_, i) => i !== index))"
      icon="i-lucide-trash-2"
    />
  </div>

  <!-- 添加新元素 -->
  <UButton
    @click="setValue([...value, { title: '', completed: false }])"
    icon="i-lucide-plus"
  />
</template>
```

### 类型签名

`setValue` 函数支持多种重载形式：

| Signature | Return Type | Description |
|-----------|-------------|-------------|
| `setValue(value: T)` | `void`{lang="ts-type"} | 设置整个字段值 |
| `setValue(relativePath: K, value: any)` | `void`{lang="ts-type"} | 设置子字段（对象）或元素属性（数组），`K` 会根据字段类型自动推导 |
| `setValue(relativePath: string, value: any)` | `void`{lang="ts-type"} | 字符串路径回退 - 支持任意路径字符串 |

## 命名规则总结

### 插槽命名模式

```ts
// 表单级插槽
'header' | 'footer' | 'submit'

// 字段级插槽 - 通用
'field-label' | 'field-hint' | 'field-description' |
'field-help' | 'field-error' | 'field-default'

// 字段级插槽 - 特定字段
'field-label:username' | 'field-hint:email' |
'field-error:password' | 'field-default:bio'

// 内容插槽 - 嵌套对象/数组
'field-content:profile' | 'field-before:tasks' | 'field-after:settings'
```

## 综合示例

结合多种插槽类型，构建一个完整的自定义表单：

::component-example
---
name: 'auto-form-slots-mixed-example'
collapse: true
props:
  class: 'px-4'
---
::
