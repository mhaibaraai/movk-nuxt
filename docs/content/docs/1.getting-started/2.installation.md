---
title: 安装
description: 在 Nuxt 4 项目中安装和配置 Movk Nuxt 模块
---

## 环境要求

::callout{color="info"}
- **Node.js** - `^20.x || ^22.x`
- **Nuxt** - `^4.2.0`（需要 Nuxt 4）
- **包管理器** - pnpm / npm / yarn
::

## 添加到 Nuxt 项目

::steps{level="3"}

### 安装所需依赖

::warning
`@movk/nuxt` 依赖 **@nuxt/ui** 和 **zod**，请确保已安装。
::

::warning
如果你使用的是 pnpm，请确保你在 `.npmrc` 文件中设置 `shamefully-hoist=true` ，或者在项目的根目录中安装 `tailwindcss` 。
::


::code-group
```bash [pnpm]
pnpm add @movk/nuxt @nuxt/ui zod
```

```bash [npm]
npm install @movk/nuxt @nuxt/ui zod
```

```bash [yarn]
yarn add @movk/nuxt @nuxt/ui zod
```
::

### 模块配置

在 `nuxt.config.ts` 中注册模块：

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@movk/nuxt']
})
```

::

## 可选配置

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['@movk/nuxt'],

  movk: {
    // 组件前缀 (默认: 'M')
    prefix: 'M'
  }
})
```

| 选项 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `prefix`{lang="ts-type"} | `string` | `'M'` | 全局组件前缀，如 `MAutoForm`、`MDatePicker` 等 |

## TypeScript 支持

Movk Nuxt 提供完整的 TypeScript 类型定义，安装后自动注入到项目中。

```ts
import type { z } from 'zod/v4'

const { afz } = useAutoForm()

const schema = afz.object({
  email: afz.email(), // ✅ 完整的类型提示
  age: afz.number()
})

// 从 schema 推断数据类型
type FormData = z.output<typeof schema>
```

## Zod v4 集成

Movk Nuxt 使用 **Zod v4**，它引入了一些重要的 API 变更：

::code-group
```ts [✅ 正确用法 (Zod v4)]
import { z } from 'zod/v4'

// 使用专用验证函数
const emailSchema = z.email()
const urlSchema = z.url()
const uuidSchema = z.uuid()
const datetimeSchema = z.iso.datetime()
```

```ts [❌ 已废弃 (Zod v3)]
import { z } from 'zod'

// 不要使用旧的字符串验证方法
const emailSchema = z.string().email()
const urlSchema = z.string().url()
const uuidSchema = z.string().uuid()
```
::

::tip{icon="i-lucide-book-open" to="https://zod.dev/api"}
查看 Zod 官方文档了解更多 v4 变更
::
